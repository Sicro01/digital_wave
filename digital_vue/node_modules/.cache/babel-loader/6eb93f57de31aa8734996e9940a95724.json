{"ast":null,"code":"import DatePicker from '@/components/shared/DatePicker';\nexport default {\n  name: 'PhaseEditDialog',\n  components: {\n    DatePicker\n  },\n  props: {\n    value: Boolean,\n    phase: Object\n  },\n  data() {\n    return {\n      changeRoute: false,\n      valid: false,\n      rules: {\n        required: v => !!v || \"Required\",\n        notEmpty: v => v.toString().length > 0 || \"Budget should be between 0 and 10,000,000\",\n        inRange: v => Number.isInteger(Number(v)) && v >= 0 && v <= 10000000 || \"Budget should be between 0 and 10,000,000\"\n      },\n      newPhase: Object\n    };\n  },\n  watch: {\n    value(val) {\n      if (val) {\n        console.log('phase: ', this.phase);\n        this.newPhase = Object.assign({}, this.phase);\n        this.$refs.form.resetValidation();\n      }\n    }\n  },\n  computed: {\n    show: {\n      get() {\n        return this.value;\n      },\n      set(value) {\n        this.$emit('input', value);\n      }\n    },\n    isEdit: {\n      get() {\n        if (this.phase.id > -1) return true;else return false;\n      }\n    }\n  },\n  methods: {\n    save() {\n      this.phase.name != this.newPhase.name ? this.changeRoute = true : this.changeRoute = false;\n      var payload = {\n        phase: this.newPhase,\n        changeRoute: this.changeRoute\n      };\n      this.isEdit ? this.$emit(\"update-phase\", payload) : this.$emit(\"create-phase\", this.newPhase);\n      this.show = false;\n    }\n    // async confirmDeletePhase() {\n    //     if (await this.$refs.confirm.open(\"Confirm\", \"Are you sure you want to delete this record?\")) {\n    //         this.deletePhase()\n    //     }\n    // },\n    // deletePhase() {\n    //     this.$emit(\"delete-phase\", this.newPhase)\n    //     this.show = false\n    // },\n  }\n};","map":{"version":3,"mappings":"AAqGA;AAEA;EACAA;EACAC;IACAC;EACA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;IACA;EACA;EACAC;IACAV;MACA;QACAW;QACA;QACA;MACA;IACA;EACA;EACAC;IACAC;MACAC;QACA;MACA;MACAC;QACA;MACA;IACA;IACAC;MACAF;QACA,wBACA,iBAEA;MACA;IACA;EACA;EACAG;IACAC;MACA;MACA;QAAAjB;QAAAE;MAAA;MACA;MACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;AACA","names":["name","components","DatePicker","props","value","phase","data","changeRoute","valid","rules","required","notEmpty","inRange","newPhase","watch","console","computed","show","get","set","isEdit","methods","save"],"sourceRoot":"src/components/dialogs","sources":["PhaseNewDialog.vue"],"sourcesContent":["<template>\r\n    <v-form\r\n        ref=\"form\"\r\n        v-model=\"valid\">\r\n        <v-dialog v-model=\"show\" persistent>\r\n            <v-card flat outlined class=\" mt-2 rounded-0\">\r\n                <v-card-title>\r\n                    {{ isEdit ? \"Edit Phase Details\" : \"Enter New Phase Details\" }}\r\n                </v-card-title>\r\n                <v-card-title>\r\n                    <v-row>\r\n                        <v-col md=\"4\" sm=\"12\" class=\"mt-3 px-2\">\r\n                            <v-text-field\r\n                                v-model=\"newPhase.name\"\r\n                                :rules=\"[rules.required]\"\r\n                                class=\"rounded-0\"\r\n                                label=\"Name\"\r\n                                dense\r\n                                outlined>\r\n                            </v-text-field>\r\n                        </v-col>\r\n                        <v-col md=\"2\" sm=\"12\" class=\"mt-3 px-2\">\r\n                            <v-text-field\r\n                                v-model=\"newPhase.start_date\"\r\n                                :rules=\"[rules.required]\"\r\n                                class=\"rounded-0\"\r\n                                label=\"Start Date\"\r\n                                dense\r\n                                outlined>\r\n                                <template v-slot:append>\r\n                                    <DatePicker v-model=\"newPhase.start_date\" />\r\n                                </template>\r\n                            </v-text-field>\r\n                        </v-col>\r\n                        <v-col md=\"2\" sm=\"12\" class=\"mt-3 px-2\">\r\n                            <v-text-field\r\n                                v-model=\"newPhase.end_date\"\r\n                                :rules=\"[rules.required]\"\r\n                                class=\"rounded-0\"\r\n                                label=\"End Date\"\r\n                                dense\r\n                                outlined>\r\n                                <template v-slot:append>\r\n                                    <DatePicker v-model=\"newPhase.end_date\" />\r\n                                </template>\r\n                            </v-text-field>\r\n                        </v-col>\r\n                        <v-col md=\"2\" sm=\"12\" class=\"mt-3 px-2\">\r\n                            <v-text-field\r\n                                v-model=\"newPhase.budget\"\r\n                                :rules=\"[rules.notEmpty, rules.inRange]\"\r\n                                label=\"Budget\"\r\n                                dense\r\n                                class=\"rounded-0\"\r\n                                outlined>\r\n                            </v-text-field>\r\n                        </v-col>\r\n                        <v-col md=\"2\" sm=\"12\" class=\"mt-3 px-2\">\r\n                            <v-checkbox\r\n                                v-model=\"newPhase.auto_allocate\"\r\n                                :disabled=\"newPhase.budget <= 0\"\r\n                                label=\"Autoallocate?\"\r\n                                dense\r\n                                color=\"secondary\">\r\n                            </v-checkbox>\r\n                        </v-col>\r\n                    </v-row>\r\n                </v-card-title>\r\n                <v-card-text class=\"px-5\">\r\n                    <v-textarea\r\n                        v-model=\"newPhase.description\"\r\n                        :rules=\"[rules.required]\"\r\n                        class=\"rounded-0\"\r\n                        label=\"Description\"\r\n                        dense\r\n                        outlined>\r\n                    </v-textarea>\r\n                </v-card-text>\r\n                <v-card-actions>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn\r\n                        class=\"grey lighten-1 mr-3 rounded-0 text-capitalize\"\r\n                        light\r\n                        depressed\r\n                        @click=\"show = false\">\r\n                        Cancel\r\n                    </v-btn>\r\n                    <v-btn\r\n                        class=\"mr-3 success rounded-0 text-capitalize\"\r\n                        depressed\r\n                        :disabled=\"!valid\"\r\n                        @click=\"save\">\r\n                        Save\r\n                    </v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n    </v-form>\r\n</template>\r\n\r\n<script>\r\nimport DatePicker from '@/components/shared/DatePicker'\r\n\r\nexport default {\r\n    name: 'PhaseEditDialog',\r\n    components: {\r\n        DatePicker,\r\n    },\r\n    props: {\r\n        value: Boolean,\r\n        phase: Object,\r\n    },\r\n    data() {\r\n        return {\r\n            changeRoute: false,\r\n            valid: false,\r\n            rules: {\r\n                required: (v => !!v || \"Required\"),\r\n                notEmpty: (v => (v.toString().length > 0) || \"Budget should be between 0 and 10,000,000\"),\r\n                inRange: (v => (Number.isInteger(Number(v)) && v >= 0 && v <= 10000000) || \"Budget should be between 0 and 10,000,000\"),\r\n            },\r\n            newPhase: Object,\r\n        }\r\n    },\r\n    watch: {\r\n        value(val) {\r\n            if (val) {\r\n                console.log('phase: ', this.phase)\r\n                this.newPhase = Object.assign({}, this.phase)\r\n                this.$refs.form.resetValidation()\r\n            }\r\n        },\r\n    },\r\n    computed: {\r\n        show: {\r\n            get() {\r\n                return this.value\r\n            },\r\n            set(value) {\r\n                this.$emit('input', value)\r\n            },\r\n        },\r\n        isEdit: {\r\n            get() {\r\n                if (this.phase.id > -1)\r\n                    return true\r\n                else\r\n                    return false\r\n            }\r\n        },\r\n    },\r\n    methods: {\r\n        save() {\r\n            this.phase.name != this.newPhase.name ? this.changeRoute = true : this.changeRoute = false\r\n            var payload = { phase: this.newPhase, changeRoute: this.changeRoute }\r\n            this.isEdit ? this.$emit(\"update-phase\", payload) : this.$emit(\"create-phase\", this.newPhase)\r\n            this.show = false\r\n        },\r\n        // async confirmDeletePhase() {\r\n        //     if (await this.$refs.confirm.open(\"Confirm\", \"Are you sure you want to delete this record?\")) {\r\n        //         this.deletePhase()\r\n        //     }\r\n        // },\r\n        // deletePhase() {\r\n        //     this.$emit(\"delete-phase\", this.newPhase)\r\n        //     this.show = false\r\n        // },\r\n    }\r\n}\r\n</script>"]},"metadata":{},"sourceType":"module"}