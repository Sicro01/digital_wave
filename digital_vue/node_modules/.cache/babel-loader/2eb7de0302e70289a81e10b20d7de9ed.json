{"ast":null,"code":"import PlanCardShow from '@/components/PlanCardShow';\nimport PlanEditDialog from '@/components/dialogs/PlanEditDialog';\nimport axios from 'axios';\nexport default {\n  name: 'PlanCardView',\n  components: {\n    PlanCardShow,\n    PlanEditDialog\n  },\n  data() {\n    return {\n      isEdit: false,\n      plans: [],\n      open_dialog: false,\n      newPlan: {\n        id: -1,\n        name: '',\n        description: ''\n      },\n      editPlan: {\n        id: 0,\n        name: '',\n        description: ''\n      }\n    };\n  },\n  mounted() {\n    this.getPlans();\n    document.title = 'Home | Digital Wave';\n  },\n  methods: {\n    async getPlans() {\n      await axios.get('api/v1/plans/').then(response => {\n        this.plans = response.data;\n        console.log('plan data:', this.plans);\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    async updatePlan(editPlan) {\n      console.log('update plan: ', editPlan);\n      await axios({\n        method: 'put',\n        url: `api/v1/plans/${editPlan.id}/`,\n        data: editPlan,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n      this.closeDialog();\n      this.getPlans();\n      const payload = {\n        text: `Successfully saved ${editPlan.name}`,\n        alerttype: \"success\",\n        contentclass: 'white--text'\n      };\n      this.$store.commit('showSnackBar', payload);\n    },\n    async createPlan(editPlan) {\n      // editPlan.phases = []\n      var createPlan = {};\n      createPlan = {\n        name: editPlan.name,\n        description: editPlan.description,\n        phases: []\n      };\n      console.log('creating: ', createPlan);\n      await axios({\n        method: 'post',\n        url: `api/v1/plans/`,\n        data: createPlan,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n      this.closeDialog();\n      this.getPlans();\n      const payload = {\n        text: `Successfully created ${editPlan.name}`,\n        alerttype: \"success\",\n        contentclass: 'white--text'\n      };\n      this.$store.commit('showSnackBar', payload);\n    },\n    async deletePlan(editPlan) {\n      console.log('deleting: ', editPlan);\n      await axios({\n        method: 'delete',\n        url: `api/v1/plans/${editPlan.id}/`,\n        data: editPlan,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n      this.closeDialog();\n      this.getPlans();\n      const payload = {\n        text: `Successfully deleted ${editPlan.name}`,\n        alerttype: \"success\",\n        contentclass: 'white--text'\n      };\n      this.$store.commit('showSnackBar', payload);\n    },\n    openEditPlanDialog(editPlan) {\n      this.editPlan = editPlan;\n      this.isEdit = true;\n      this.open_dialog = true;\n    },\n    openNewPlanDialog() {\n      this.editPlan = this.newPlan;\n      this.isEdit = false;\n      this.open_dialog = true;\n    },\n    closeDialog() {\n      this.open_dialog = false;\n    }\n  }\n};","map":{"version":3,"mappings":"AA8CA;AACA;AACA;AAEA;EACAA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;QACAC;QACAT;QACAU;MACA;MACAC;QACAF;QACAT;QACAU;MACA;IACA;EACA;EACAE;IACA;IACAC;EACA;EACAC;IACA;MACA,YACAC,qBACAC;QACA;QACAC;MACA,GACAC;QACAD;MACA;IACA;IACA;MACAA;MACA;QACAE;QACAC;QACAhB;QACAiB;UAAA;QAAA;MACA,GACAH;QACAD;MACA;MACA;MACA;MACA;QAAAK;QAAAC;QAAAC;MAAA;MACA;IACA;IACA;MACA;MACA;MACAC;QACAzB;QACAU;QACAgB;MACA;MACAT;MACA;QACAE;QACAC;QACAhB;QACAiB;UAAA;QAAA;MACA,GACAH;QACAD;MACA;MACA;MACA;MACA;QAAAK;QAAAC;QAAAC;MAAA;MACA;IACA;IACA;MACAP;MACA;QACAE;QACAC;QACAhB;QACAiB;UAAA;QAAA;MACA,GACAH;QACAD;MACA;MACA;MACA;MACA;QAAAK;QAAAC;QAAAC;MAAA;MACA;IACA;IACAG;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;EACA;AACA","names":["name","components","PlanCardShow","PlanEditDialog","data","isEdit","plans","open_dialog","newPlan","id","description","editPlan","mounted","document","methods","get","then","console","catch","method","url","headers","text","alerttype","contentclass","createPlan","phases","openEditPlanDialog","openNewPlanDialog","closeDialog"],"sourceRoot":"src/views","sources":["PlanCardView.vue"],"sourcesContent":["<template>\n    <!-- <v-container fluid class=\"pa-0\"> -->\n    <div>\n        <v-row\n            class=\"primary--text font-weight-black text-h3\">\n            <v-col md=\"6\" offset=\"3\" class=\"text-center\">\n                <span>Plans</span>\n            </v-col>\n            <v-spacer></v-spacer>\n            <v-col cols=\"2\" class=\"text-right\">\n                <v-btn\n                    class=\"mr-7 mb-3 primary rounded-0 text-capitalize text-body-1\"\n                    dark\n                    @click=\"openNewPlanDialog()\"\n                    depressed>\n                    New Plan\n                </v-btn>\n            </v-col>\n        </v-row>\n        <br />\n        <br />\n        <br />\n        <v-row class=\"mb-5 mx-4\">\n            <v-col\n                v-for=\"(plan, index) in plans\" :key=\"plan.id\"\n                lg=\"3\"\n                md=\"4\"\n                sm=12\n                class=\"px-3 py-0\">\n                <PlanCardShow\n                    :plan=\"plan\"\n                    @open-dialog=\"openEditPlanDialog(plan)\" />\n            </v-col>\n        </v-row>\n        <PlanEditDialog\n            :dialog=\"open_dialog\"\n            :plan=\"editPlan\"\n            :isEdit=\"isEdit\"\n            @close-dialog=\"closeDialog\"\n            @update-plan=\"updatePlan\"\n            @create-plan=\"createPlan\"\n            @delete-plan=\"deletePlan\" />\n    </div>\n    <!-- </v-container> -->\n</template>\n<script>\nimport PlanCardShow from '@/components/PlanCardShow'\nimport PlanEditDialog from '@/components/dialogs/PlanEditDialog'\nimport axios from 'axios'\n\nexport default {\n    name: 'PlanCardView',\n    components: {\n        PlanCardShow,\n        PlanEditDialog,\n    },\n    data() {\n        return {\n            isEdit: false,\n            plans: [],\n            open_dialog: false,\n            newPlan: {\n                id: -1,\n                name: '',\n                description: '',\n            },\n            editPlan: {\n                id: 0,\n                name: '',\n                description: '',\n            },\n        }\n    },\n    mounted() {\n        this.getPlans()\n        document.title = 'Home | Digital Wave'\n    },\n    methods: {\n        async getPlans() {\n            await axios\n                .get('api/v1/plans/')\n                .then(response => {\n                    this.plans = response.data\n                    console.log('plan data:', this.plans)\n                })\n                .catch(error => {\n                    console.log(error)\n                })\n        },\n        async updatePlan(editPlan) {\n            console.log('update plan: ', editPlan)\n            await axios({\n                method: 'put',\n                url: `api/v1/plans/${editPlan.id}/`,\n                data: editPlan,\n                headers: { 'Content-Type': 'application/json' }\n            })\n                .catch(error => {\n                    console.log(error)\n                })\n            this.closeDialog()\n            this.getPlans()\n            const payload = { text: `Successfully saved ${editPlan.name}`, alerttype: \"success\", contentclass: 'white--text' }\n            this.$store.commit('showSnackBar', payload)\n        },\n        async createPlan(editPlan) {\n            // editPlan.phases = []\n            var createPlan = {}\n            createPlan = {\n                name: editPlan.name,\n                description: editPlan.description,\n                phases: []\n            }\n            console.log('creating: ', createPlan)\n            await axios({\n                method: 'post',\n                url: `api/v1/plans/`,\n                data: createPlan,\n                headers: { 'Content-Type': 'application/json' }\n            })\n                .catch(error => {\n                    console.log(error)\n                })\n            this.closeDialog()\n            this.getPlans()\n            const payload = { text: `Successfully created ${editPlan.name}`, alerttype: \"success\", contentclass: 'white--text' }\n            this.$store.commit('showSnackBar', payload)\n        },\n        async deletePlan(editPlan) {\n            console.log('deleting: ', editPlan)\n            await axios({\n                method: 'delete',\n                url: `api/v1/plans/${editPlan.id}/`,\n                data: editPlan,\n                headers: { 'Content-Type': 'application/json' }\n            })\n                .catch(error => {\n                    console.log(error)\n                })\n            this.closeDialog()\n            this.getPlans()\n            const payload = { text: `Successfully deleted ${editPlan.name}`, alerttype: \"success\", contentclass: 'white--text' }\n            this.$store.commit('showSnackBar', payload)\n        },\n        openEditPlanDialog(editPlan) {\n            this.editPlan = editPlan\n            this.isEdit = true\n            this.open_dialog = true\n        },\n        openNewPlanDialog() {\n            this.editPlan = this.newPlan\n            this.isEdit = false\n            this.open_dialog = true\n        },\n        closeDialog() {\n            this.open_dialog = false\n        },\n    }\n}\n</script>"]},"metadata":{},"sourceType":"module"}